CREATE DATABASE DB_Call_Center

CREATE TABLE Clientes (

	Codigo int primary key,
	Nombre varchar(50),
	Telefono varchar(10),
	Mail varchar(100)
)


CREATE TABLE Razones_Sociales (

	Codigo int primary key,
	Nombre varchar(50),
	CUIT varchar(11),
	Cliente int foreign key references Clientes(Codigo)
)

CREATE TABLE Puestos (

	Codigo int primary key,
	Nombre varchar(50)

)

CREATE TABLE Empleados (

	ID_Empleado int primary key,
	Nombre varchar(50),
	Apellido varchar(50),
	Mail varchar(100),
	Usuario varchar(50),
	Contraseña varchar(25),
	Puesto int foreign key references Puestos(Codigo)
)

CREATE TABLE Tipo (

	Codigo int primary key,
	Nombre varchar(50)

)

CREATE TABLE Subtipo (

	Codigo int primary key,
	Nombre varchar(50)

)

CREATE TABLE Incidentes (

	Numero int primary key,
	Usuario_Registro int foreign key references Empleados(ID_Empleado),
	Fecha_Registro date,
	Cliente int foreign key references Clientes(Codigo),
	Razon_Social int foreign key references Razones_Sociales(Codigo),
	Tipo int foreign key references Tipo(Codigo),
	Subtipo int foreign key references Subtipo(Codigo),
	Detalle varchar(1500)

)

CREATE TABLE Tareas (

	Numero int primary key,
	Asunto varchar(50),
	Tipo int foreign key references Tipo(Codigo),
	Cliente int foreign key references Clientes(Codigo),
	Razon_Social int foreign key references Razones_Sociales(Codigo),
	AsignadoA int foreign key references Empleados(ID_Empleado),
	Fecha_Inicio date,
	Fecha_Vencimiento date,
	Cierre date,
	Incidente int foreign key references Incidentes(Numero)
)

-----------------------------

insert into TiposCuentas (Nombre, CapacidadEnMB) values ('Administrador', 50)
insert into TiposCuentas (Nombre, CapacidadEnMB) values ('Supervisor', 50)
insert into TiposCuentas (Nombre, CapacidadEnMB) values ('Telefonista', 50)

insert into Usuarios (IDTipoCuenta, NombreUsuario) values ( 6, 'INFRAESTRUCTURA')
insert into Usuarios (IDTipoCuenta, NombreUsuario) values ( 7, 'JEFE')
insert into Usuarios (IDTipoCuenta, NombreUsuario) values ( 8, 'EMPLEADO')

insert into Clientes (Codigo,Nombre,Telefono,Mail) values (1010, 'UTN S.A.', '11222333', 'direcciones@utn.com.ar')

insert into Razones_Sociales (Codigo, Nombre, CUIT, Cliente) values (1111, 'FRGP', '30112223335', 1010)
insert into Razones_Sociales (Codigo, Nombre, CUIT, Cliente) values (2222, 'BA', '30152223335', 1010)


alter table Subtipo
ADD [Tipo] int foreign key references Tipo(Codigo)


insert into Tipo (Codigo, Nombre) values (1, 'Tareas varias')
insert into Subtipo (Codigo, Nombre, Tipo) values (11, 'Instalación', 1)
insert into Subtipo (Codigo, Nombre, Tipo) values (12, 'Actualización', 1)

